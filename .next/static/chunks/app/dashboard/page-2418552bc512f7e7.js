(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{954:function(e,r,t){Promise.resolve().then(t.bind(t,1720))},1720:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return u}});var s=t(2403),a=t(3583),n=t(76),i=t(6200),l=t(7437),c=t(605),d=t(2265),o=t(7648);function u(){var e,r,t,u=(0,c.useSession)(),x=u.data,h=u.status,m=(0,a._)((0,d.useState)([]),2),g=m[0],f=m[1],b=(0,a._)((0,d.useState)(!0),2),v=b[0],p=b[1],j=(0,a._)((0,d.useState)(null),2),y=j[0],N=j[1];function w(){return(w=(0,s._)(function(){var e;return(0,i.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,4,5,6]),[4,fetch("/api/user/scores")];case 1:if(!(e=r.sent()).ok)return[3,3];return[4,e.json()];case 2:f(r.sent().scores||[]),r.label=3;case 3:return[3,6];case 4:return console.error("Error fetching scores:",r.sent()),[3,6];case 5:return p(!1),[7];case 6:return[2]}})})).apply(this,arguments)}function k(){return(k=(0,s._)(function(){var e;return(0,i.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),[4,fetch("/api/user/rank")];case 1:if(!(e=r.sent()).ok)return[3,3];return[4,e.json()];case 2:N(r.sent().rank),r.label=3;case 3:return[3,5];case 4:return console.error("Error fetching rank:",r.sent()),[3,5];case 5:return[2]}})})).apply(this,arguments)}if((0,d.useEffect)(function(){var e;"authenticated"===h&&(null==x?void 0:null===(e=x.user)||void 0===e?void 0:e.fid)?(function(){w.apply(this,arguments)}(),function(){return k.apply(this,arguments)}()):"unauthenticated"===h&&p(!1)},[x,h]),"loading"===h||v)return(0,l.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-[#6B8E23] via-[#4682B4] to-[#E07A5F] flex items-center justify-center",children:(0,l.jsx)("div",{className:"text-white text-xl",children:"Loading..."})});if("unauthenticated"===h)return(0,l.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-[#6B8E23] via-[#4682B4] to-[#E07A5F] flex items-center justify-center p-4",children:(0,l.jsxs)("div",{className:"max-w-md w-full bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-8 text-center",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Sign In Required"}),(0,l.jsx)("p",{className:"text-gray-700 mb-6",children:"Please sign in to view your dashboard and score history."}),(0,l.jsx)(o.default,{href:"/auth/signin",className:"inline-block px-6 py-3 bg-[#4682B4] hover:bg-[#3a6a9a] text-white rounded-lg transition-colors",children:"Sign In with Farcaster"})]})});var E=g.length>0?(e=Math).max.apply(e,(0,n._)(g.map(function(e){return e.score}))):0,B=g.length>0?Math.round(g.reduce(function(e,r){return e+r.score},0)/g.length):0;return(0,l.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-[#6B8E23] via-[#4682B4] to-[#E07A5F] p-4",children:(0,l.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,l.jsxs)("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-8 md:p-12",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"\uD83E\uDDEC Your Dashboard"}),(0,l.jsxs)("p",{className:"text-gray-600",children:["Welcome back, ",(null==x?void 0:null===(r=x.user)||void 0===r?void 0:r.username)||(null==x?void 0:null===(t=x.user)||void 0===t?void 0:t.name),"!"]})]}),(0,l.jsx)(o.default,{href:"/api/frame",className:"px-6 py-3 bg-[#4682B4] hover:bg-[#3a6a9a] text-white rounded-lg transition-colors",children:"Take Quiz"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[(0,l.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,l.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:E}),(0,l.jsx)("div",{className:"text-gray-600",children:"Best Score"})]}),(0,l.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,l.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:B}),(0,l.jsx)("div",{className:"text-gray-600",children:"Average Score"})]}),(0,l.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,l.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:y?"#".concat(y):"—"}),(0,l.jsx)("div",{className:"text-gray-600",children:"Leaderboard Rank"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Score History"}),0===g.length?(0,l.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[(0,l.jsx)("p",{className:"text-gray-600 mb-4",children:"No scores yet!"}),(0,l.jsx)(o.default,{href:"/api/frame",className:"inline-block px-6 py-3 bg-[#4682B4] hover:bg-[#3a6a9a] text-white rounded-lg transition-colors",children:"Take Your First Quiz"})]}):(0,l.jsx)("div",{className:"space-y-4",children:g.map(function(e,r){return(0,l.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 flex justify-between items-center",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:[e.score,"/100"]}),(0,l.jsxs)("div",{className:"text-gray-600",children:[e.badge," Tier • ",new Date(e.timestamp).toLocaleDateString()]})]}),(0,l.jsx)("div",{className:"text-sm text-gray-500",children:new Date(e.timestamp).toLocaleTimeString()})]},r)})})]}),(0,l.jsxs)("div",{className:"mt-8 pt-8 border-t border-gray-200 flex gap-4",children:[(0,l.jsx)(o.default,{href:"/leaderboard",className:"flex-1 text-center px-6 py-3 bg-[#6B8E23] hover:bg-[#5a7a1d] text-white rounded-lg transition-colors",children:"View Leaderboard"}),(0,l.jsx)(o.default,{href:"/api/frame",className:"flex-1 text-center px-6 py-3 border-2 border-[#4682B4] text-[#4682B4] hover:bg-[#4682B4] hover:text-white rounded-lg transition-colors",children:"Retake Quiz"})]})]})})})}}},function(e){e.O(0,[605,648,971,117,744],function(){return e(e.s=954)}),_N_E=e.O()}]);