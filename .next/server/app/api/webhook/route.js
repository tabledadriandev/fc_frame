"use strict";(()=>{var e={};e.id=570,e.ids=[570],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},24448:(e,t,o)=>{o.r(t),o.d(t,{originalPathname:()=>g,patchFetch:()=>f,requestAsyncStorage:()=>m,routeModule:()=>d,serverHooks:()=>h,staticGenerationAsyncStorage:()=>x});var i={};o.r(i),o.d(i,{GET:()=>l,POST:()=>c});var n=o(49303),s=o(88716),r=o(60670),a=o(87070),u=o(95908),p=o(92180);async function c(e){try{let t=await e.json();if(console.log("Frame webhook received:",{timestamp:new Date().toISOString(),data:t}),"quiz_complete"===t.type&&t.fid&&t.answers){let e=(0,p.mB)(t.answers),o=(0,p.lU)(e);await (0,u.oE)(t.fid,t.username,e,o.tier,o.badge,t.answers)}return a.NextResponse.json({success:!0,message:"Webhook received",timestamp:new Date().toISOString()},{status:200})}catch(e){return console.error("Webhook error:",e),a.NextResponse.json({success:!1,error:"Invalid webhook payload"},{status:400})}}async function l(e){return a.NextResponse.json({status:"ok",service:"Farcaster Frame Webhook",timestamp:new Date().toISOString()},{status:200})}let d=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/webhook/route",pathname:"/api/webhook",filename:"route",bundlePath:"app/api/webhook/route"},resolvedPagePath:"C:\\Users\\anton\\Desktop\\ta_project\\ta_farcaster\\app\\api\\webhook\\route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:m,staticGenerationAsyncStorage:x,serverHooks:h}=d,g="/api/webhook/route";function f(){return(0,r.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:x})}},92180:(e,t,o)=>{o.d(t,{Sz:()=>i,kW:()=>r,lU:()=>s,mB:()=>n});let i=[{id:1,text:"How many servings of vegetables do you eat daily?",emoji:"\uD83E\uDD57",options:[{text:"0 servings",points:0},{text:"1-3 servings",points:6},{text:"4-6 servings",points:10},{text:"7+ servings",points:13}]},{id:2,text:"Hours of sleep per night?",emoji:"\uD83D\uDCA4",options:[{text:"< 5 hours",points:0},{text:"5-6 hours",points:4},{text:"7-8 hours",points:12},{text:"9+ hours",points:8}]},{id:3,text:"Exercise frequency?",emoji:"\uD83C\uDFC3",options:[{text:"Never",points:0},{text:"1-2x/week",points:6},{text:"3-4x/week",points:10},{text:"Daily",points:13}]},{id:4,text:"Do you follow Mediterranean diet principles?",emoji:"\uD83C\uDF47",options:[{text:"Never",points:0},{text:"Sometimes",points:6},{text:"Often",points:10},{text:"Always",points:13}]},{id:5,text:"Stress management practice?",emoji:"\uD83E\uDDD8",options:[{text:"None",points:0},{text:"Occasional",points:4},{text:"Regular",points:10},{text:"Daily",points:13}]},{id:6,text:"Social connections?",emoji:"\uD83D\uDC65",options:[{text:"Isolated",points:0},{text:"Few friends",points:4},{text:"Active social life",points:10},{text:"Strong community",points:13}]},{id:7,text:"Fasting habits?",emoji:"⏰",options:[{text:"Never",points:0},{text:"Occasional",points:6},{text:"Regular IF",points:10},{text:"Extended fasts",points:12}]},{id:8,text:"Supplement routine?",emoji:"\uD83D\uDC8A",options:[{text:"None",points:2},{text:"Basic vitamins",points:6},{text:"Targeted stack",points:10},{text:"Biohacker protocol",points:12}]}];function n(e){let t=0;e.forEach(e=>{let o=i.find(t=>t.id===e.questionId);o&&o.options[e.answerIndex]&&(t+=o.options[e.answerIndex].points)});let o=i.reduce((e,t)=>e+Math.max(...t.options.map(e=>e.points)),0);return Math.round(t/o*100)}function s(e){let t,o,i,n,s;return e>=86?(t="longevity-champion",o="\uD83C\uDFC6 Longevity Champion! You're optimizing your health at the highest level.",i=["Maintain your current routine - you're doing exceptional!","Consider sharing your strategies with the community","Explore advanced biohacking protocols if interested"],n="Platinum",s="#E5E4E2"):e>=66?(t="thriving",o="✨ Thriving! You're on an excellent path to longevity.",i=["Focus on consistency in your current habits","Add 1-2 more servings of vegetables daily","Prioritize 7-8 hours of quality sleep"],n="Gold",s="#FFD700"):e>=41?(t="good-foundation",o="\uD83C\uDF31 Good Foundation! You have solid habits to build upon.",i=["Aim for 5+ servings of vegetables daily","Establish a regular exercise routine (3-4x/week)","Practice stress management techniques daily"],n="Silver",s="#C0C0C0"):(t="needs-attention",o="\uD83D\uDCAA Needs Attention - but every journey starts with awareness!",i=["Start with 2-3 servings of vegetables daily","Aim for 7-8 hours of sleep consistently","Begin with 2-3 exercise sessions per week"],n="Bronze",s="#CD7F32"),{score:e,tier:t,message:o,tips:i,badge:n,badgeColor:s}}function r(e,t){return({"longevity-champion":`Scoring ${t}/100 puts you in the top tier of longevity optimization!`,thriving:`With ${t}/100, you're thriving on your longevity journey!`,"good-foundation":`Your ${t}/100 score shows a solid foundation for longevity.`,"needs-attention":`Your ${t}/100 score is a great starting point for improvement!`})[e]}},95908:(e,t,o)=>{o.d(t,{UM:()=>a,Zp:()=>r,oE:()=>n,sA:()=>s});let i=[];async function n(e,t,o,n,s,r){i.push({fid:e,username:t,score:o,tier:n,badge:s,answers:r,timestamp:new Date})}async function s(e){return i.filter(t=>t.fid===e).sort((e,t)=>t.timestamp.getTime()-e.timestamp.getTime())}async function r(e=10){let t=new Map;return i.forEach(e=>{let o=t.get(e.fid);(!o||e.score>o.score)&&t.set(e.fid,e)}),Array.from(t.values()).sort((e,t)=>t.score-e.score).slice(0,e)}async function a(e){let t=(await r(1e3)).findIndex(t=>t.fid===e);return t>=0?t+1:-1}}};var t=require("../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),i=t.X(0,[276,972],()=>o(24448));module.exports=i})();