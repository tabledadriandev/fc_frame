"use strict";(()=>{var e={};e.id=414,e.ids=[414],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},44644:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>f,patchFetch:()=>g,requestAsyncStorage:()=>c,routeModule:()=>u,serverHooks:()=>m,staticGenerationAsyncStorage:()=>l});var a={};t.r(a),t.d(a,{GET:()=>p});var o=t(49303),s=t(88716),n=t(60670),i=t(87070),d=t(95908);async function p(e){try{let r=e.nextUrl.searchParams,t=parseInt(r.get("limit")||"10"),a=await (0,d.Zp)(t);return i.NextResponse.json({leaderboard:a.map(e=>({fid:e.fid,username:e.username,score:e.score,tier:e.tier,badge:e.badge,timestamp:e.timestamp.toISOString()}))})}catch(e){return console.error("Error fetching leaderboard:",e),i.NextResponse.json({error:"Internal server error"},{status:500})}}let u=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/leaderboard/route",pathname:"/api/leaderboard",filename:"route",bundlePath:"app/api/leaderboard/route"},resolvedPagePath:"C:\\Users\\anton\\Desktop\\ta_project\\ta_farcaster\\app\\api\\leaderboard\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:c,staticGenerationAsyncStorage:l,serverHooks:m}=u,f="/api/leaderboard/route";function g(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:l})}},95908:(e,r,t)=>{t.d(r,{UM:()=>i,Zp:()=>n,oE:()=>o,sA:()=>s});let a=[];async function o(e,r,t,o,s,n){a.push({fid:e,username:r,score:t,tier:o,badge:s,answers:n,timestamp:new Date})}async function s(e){return a.filter(r=>r.fid===e).sort((e,r)=>r.timestamp.getTime()-e.timestamp.getTime())}async function n(e=10){let r=new Map;return a.forEach(e=>{let t=r.get(e.fid);(!t||e.score>t.score)&&r.set(e.fid,e)}),Array.from(r.values()).sort((e,r)=>r.score-e.score).slice(0,e)}async function i(e){let r=(await n(1e3)).findIndex(r=>r.fid===e);return r>=0?r+1:-1}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[276,972],()=>t(44644));module.exports=a})();