"use strict";(()=>{var e={};e.id=414,e.ids=[414],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},44644:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>g,patchFetch:()=>h,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>f,staticGenerationAsyncStorage:()=>m});var a={};t.r(a),t.d(a,{GET:()=>u,dynamic:()=>p});var o=t(49303),n=t(88716),s=t(60670),i=t(87070),d=t(95908);let p="force-dynamic";async function u(e){try{let r=e.nextUrl.searchParams,t=parseInt(r.get("limit")||"10"),a=await (0,d.Zp)(t);return i.NextResponse.json({leaderboard:a.map(e=>({fid:e.fid,username:e.username,score:e.score,tier:e.tier,badge:e.badge,timestamp:e.timestamp.toISOString()}))})}catch(e){return console.error("Error fetching leaderboard:",e),i.NextResponse.json({error:"Internal server error"},{status:500})}}let c=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/leaderboard/route",pathname:"/api/leaderboard",filename:"route",bundlePath:"app/api/leaderboard/route"},resolvedPagePath:"C:\\Users\\anton\\Desktop\\ta_project\\ta_farcaster\\app\\api\\leaderboard\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:l,staticGenerationAsyncStorage:m,serverHooks:f}=c,g="/api/leaderboard/route";function h(){return(0,s.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:m})}},95908:(e,r,t)=>{t.d(r,{UM:()=>i,Zp:()=>s,oE:()=>o,sA:()=>n});let a=[];async function o(e,r,t,o,n,s){a.push({fid:e,username:r,score:t,tier:o,badge:n,answers:s,timestamp:new Date})}async function n(e){return a.filter(r=>r.fid===e).sort((e,r)=>r.timestamp.getTime()-e.timestamp.getTime())}async function s(e=10){let r=new Map;return a.forEach(e=>{let t=r.get(e.fid);(!t||e.score>t.score)&&r.set(e.fid,e)}),Array.from(r.values()).sort((e,r)=>r.score-e.score).slice(0,e)}async function i(e){let r=(await s(1e3)).findIndex(r=>r.fid===e);return r>=0?r+1:-1}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[276,972],()=>t(44644));module.exports=a})();